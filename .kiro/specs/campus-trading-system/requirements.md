# 校园二手交易系统需求文档

## 项目概述

校园二手交易系统是一个面向在校学生的二手物品交易平台，旨在为学生提供一个安全、便捷的校园内物品交易环境。系统采用Web架构，前端使用Vue3框架，后端使用Spring Boot框架，数据库使用MySQL8。

## 功能需求

### 需求1：用户注册与认证

**用户故事：** 作为一名在校学生，我希望能够注册账号并登录系统，以便我可以在平台上进行二手物品交易。

#### 验收标准
1. WHEN 用户访问注册页面 THEN 系统 SHALL 显示包含学号、姓名、密码、确认密码、手机号、邮箱的注册表单
2. WHEN 用户提交注册信息 THEN 系统 SHALL 验证学号格式的有效性
3. WHEN 用户提交有效的注册信息 THEN 系统 SHALL 创建用户账户并发送验证邮件
4. WHEN 用户使用正确的学号和密码登录 THEN 系统 SHALL 生成JWT令牌并跳转到主页
5. WHEN 用户输入错误的登录凭据 THEN 系统 SHALL 显示相应的错误提示信息

### 需求2：商品发布与管理

**用户故事：** 作为一名卖家，我希望能够发布我的二手物品信息，以便其他同学可以看到并购买我的物品。

#### 验收标准
1. WHEN 已登录用户点击发布商品 THEN 系统 SHALL 显示商品发布表单
2. WHEN 用户填写商品信息（标题、描述、价格、分类、图片） THEN 系统 SHALL 验证必填字段的完整性
3. WHEN 用户上传商品图片 THEN 系统 SHALL 支持最多5张图片，每张不超过2MB
4. WHEN 用户成功发布商品 THEN 系统 SHALL 保存商品信息并显示在商品列表中
5. WHEN 用户查看自己发布的商品 THEN 系统 SHALL 提供编辑和删除功能
6. WHEN 用户删除商品 THEN 系统 SHALL 将商品状态标记为已删除而非物理删除

### 需求3：商品浏览与搜索

**用户故事：** 作为一名买家，我希望能够浏览和搜索商品，以便找到我需要的二手物品。

#### 验收标准
1. WHEN 用户访问首页 THEN 系统 SHALL 显示最新发布的商品列表（分页显示）
2. WHEN 用户使用关键词搜索 THEN 系统 SHALL 在商品标题和描述中进行模糊匹配
3. WHEN 用户选择商品分类筛选 THEN 系统 SHALL 只显示该分类下的商品
4. WHEN 用户设置价格区间筛选 THEN 系统 SHALL 显示价格在指定范围内的商品
5. WHEN 用户点击商品 THEN 系统 SHALL 显示商品详情页面，包含所有图片、详细描述、卖家信息
6. WHEN 用户在商品详情页 THEN 系统 SHALL 显示"联系卖家"按钮

### 需求4：用户沟通与消息

**用户故事：** 作为买家或卖家，我希望能够与交易对方进行沟通，以便协商交易细节。

#### 验收标准
1. WHEN 买家点击"联系卖家" THEN 系统 SHALL 打开消息对话框
2. WHEN 用户发送消息 THEN 系统 SHALL 实时保存消息并通知接收方
3. WHEN 用户收到新消息 THEN 系统 SHALL 在消息中心显示未读消息提醒
4. WHEN 用户查看消息列表 THEN 系统 SHALL 显示所有对话，按最新消息时间排序
5. WHEN 用户点击对话 THEN 系统 SHALL 显示完整的聊天记录

### 需求5：交易订单管理

**用户故事：** 作为用户，我希望能够管理我的交易订单，以便跟踪交易状态和历史记录。

#### 验收标准
1. WHEN 买卖双方达成交易意向 THEN 系统 SHALL 允许创建交易订单
2. WHEN 创建订单 THEN 系统 SHALL 记录买家、卖家、商品、价格、交易时间等信息
3. WHEN 订单创建后 THEN 系统 SHALL 将商品状态更新为"交易中"
4. WHEN 交易完成 THEN 系统 SHALL 允许双方确认交易完成
5. WHEN 双方都确认完成 THEN 系统 SHALL 将订单状态更新为"已完成"
6. WHEN 用户查看订单历史 THEN 系统 SHALL 分别显示买入和卖出的订单记录

### 需求6：用户个人中心

**用户故事：** 作为用户，我希望能够管理我的个人信息和查看我的交易活动，以便维护我的账户和了解交易情况。

#### 验收标准
1. WHEN 用户访问个人中心 THEN 系统 SHALL 显示用户基本信息、发布的商品数量、交易次数
2. WHEN 用户修改个人信息 THEN 系统 SHALL 允许修改除学号外的其他信息
3. WHEN 用户查看"我发布的" THEN 系统 SHALL 显示用户发布的所有商品及其状态
4. WHEN 用户查看"我买到的" THEN 系统 SHALL 显示用户购买的商品记录
5. WHEN 用户查看"我卖出的" THEN 系统 SHALL 显示用户卖出的商品记录

### 需求7：系统管理功能

**用户故事：** 作为系统管理员，我希望能够管理用户和商品，以便维护平台的正常运行和内容质量。

#### 验收标准
1. WHEN 管理员登录后台 THEN 系统 SHALL 显示用户统计、商品统计、交易统计等数据
2. WHEN 管理员查看用户列表 THEN 系统 SHALL 显示所有用户信息并支持搜索和筛选
3. WHEN 管理员查看商品列表 THEN 系统 SHALL 显示所有商品信息并支持审核操作
4. WHEN 发现违规商品 THEN 系统 SHALL 允许管理员下架或删除商品
5. WHEN 发现违规用户 THEN 系统 SHALL 允许管理员禁用用户账户

## 非功能性需求

### 性能需求
- 系统响应时间应在2秒内
- 支持并发用户数不少于100人
- 图片上传大小限制为2MB

### 安全需求
- 用户密码必须加密存储
- 使用JWT进行用户认证
- 防止SQL注入和XSS攻击

### 可用性需求
- 系统可用性应达到99%
- 界面应简洁易用，符合学生使用习惯
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）

### 兼容性需求
- 前端兼容现代浏览器
- 后端基于Java 8+
- 数据库使用MySQL 8.0+